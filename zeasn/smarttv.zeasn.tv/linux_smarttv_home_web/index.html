<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>smart_tv_homepage</title>
    <script>
        !(function(n) {
            var e = n.document,
            t = e.documentElement,
            i = 1280,
            d = i / 100,
            o = 'orientationchange' in n ? 'orientationchange' : 'resize',
            a = function() {
              var n = t.clientWidth
              t.style.fontSize = n / d + 'px'
            }
            if (e.addEventListener) {
              n.addEventListener(o, a, !1)
              e.addEventListener('DOMContentLoaded', a, !1)
            }
            a()
        })(window)
    </script>
    <script type="text/javascript" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
</head>
<body>

<div id = "wapper">
    <!--<div id = "error"></div>-->
    <object type="application/NetTV_objectFactory" id="nettvObjectFactory"
            style="position: absolute; top: 0; left: 0; width: 0; height: 0;"></object>
    <div id = "header">
        <div id = "iconBox" class = "clearFix">
            <div id = "header_1_1" class = "header_icon_box clearFix mouseSelected">
                <div id = "exitBtn" class = "header_icon"></div>
                <div id = "exitBtn_f" class = "header_icon"></div>
            </div>
            <div id = "header_1_2" class = "header_icon_box clearFix mouseSelected">
                <div id = "smartTv" class = "header_icon"></div>
                <div id = "smartTv_f" class = "header_icon"></div>
                <div id = "title"></div>
            </div>
        </div>
    </div>
    <div id = "nav" class="hide">
        <div id = "nav_1" class = "nav_list"></div>
    </div>
    <div id = "banner" class = "clearFix">
    </div>
    <div id = "App_box_screen">
        <div id = "App_box">
        </div>
    </div>
    <div id = "arrow_up" class = "arrow"></div>
    <div id = "arrow_down" class = "arrow"></div>
    <div id = "bottom">
        <div class = "BottomLeft">
            <div class = "sq hide"></div>
            <p id = "help"></p>
        </div>
        <p id = "timer"></p>
    </div>
</div>
</body>
<script src="//cache.zeasn.tv/webstatic/homepage_web/ad/zeasn_ad_sdk.js"></script>
<script type="text/javascript">
  document.addEventListener("PlayStarted", function (e) {// 广告开始播放
    if (document.getElementById('SmartHome_video') != null) {
      document.getElementById('SmartHome_video').classList.remove("no-focus")
      document.getElementById('SmartHome_video').style.background = "#000"
    }
  },false);
  document.addEventListener("PlayFinished", function (e) {// 广告结束播放
    var videoObject = document.getElementById('SmartHome_video');
    if (videoObject != null && videoObject.childNodes.length === 0) videoObject.parentNode.removeChild(videoObject);
    if (videoObject != null) videoObject.remove();
    document.getElementById('SmartHome_5_300x250').style.display = 'block'
  }, false);
  var str = "";
  if (navigator.userAgent.indexOf("aoc") > -1 || navigator.userAgent.indexOf("AOC") > -1) {
      str = "AOC_"
  }
  var country,lang = "en",manufacturerid,ctn,categoryId,productId;
  if(fetchCookie("country")){
      country = fetchCookie("country");
  }else{ //"AU"
      country = "BR";
  }
  if(fetchCookie("manufacturerid")){
      manufacturerid = fetchCookie("manufacturerid");
  }else{
      manufacturerid = "0008c6";
  }
  if(fetchCookie("profileid")){
      ctn = fetchCookie("profileid").split("_")[0];
  }else{
      ctn = "32PHT5102/98";
  }
  var array = [];
  var _str = "";
  for (var i = 0; i < 5; i++) {
    array.push(str + "SmartHome_" + (i + 1) + "_300x250")
    var hideStr = (i==4 && str != "AOC_")?'style=display:none':''
    _str += "<a id='" + str + "SmartHome_" + (i + 1) + "_300x250' area='banner'  class='banner_list mouseSelected'"+hideStr+">" +
      "<div class ='shade banner_shade'></div>" +
      "<a name='" + str + "SmartHome_" + (i + 1) + "_300x250' class='advImgBox'></a>" +
      "</a>";
  }
  if(str != "AOC_"){
    _str += "<a id='" + str + "SmartHome_video" + "'area='banner'  class='banner_list mouseSelected no-focus'></a>"
  }
  console.log(_str);
  document.getElementById('banner').innerHTML = _str;
  var param = "cntry=" + country + "&lang=" + lang + "&manid=" + manufacturerid + "&ctn=" + ctn + "";
  var j = 0,
    advTimer = null;
  if (str != "AOC_") {
    var videoAd = new SmartTV_VideoBanner("FeatureApp_VIDEOPIP", "SmartHome_video", "", param);
    videoAd.startAd();
  }
  var adv = new SmartTV_NormalBanner(array.join(","), "", "", param);
  adv.startAd();
  function fetchCookie(name){
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
    if(arr=document.cookie.match(reg))
    return unescape(arr[2]);
    else
    return null;
  }
</script>
<link rel="stylesheet" href="//cache.zeasn.tv/webstatic/linux_smarttv_home_web/css/index.css">
<script src = "//cache.zeasn.tv/webstatic/linux_smarttv_home_web/js/jquery-3.1.1.min.js"></script>
<script src = "//cache.zeasn.tv/webstatic/linux_smarttv_home_web/js/EN.js"></script>
<script src = "//cache.zeasn.tv/webstatic/linux_smarttv_home_web/js/tool.js"></script>
<script src = "//cache.zeasn.tv/webstatic/linux_smarttv_home_web/js/index.js"></script>
<script>
    var environment = "https://smarttv.zeasn.tv/BluePortServlets/";
    var keyCode = {
        406:"help",
        8:"back",
        37:"left",
        38:"up",
        39:"right",
        40:"down",
        13:"enter"
    };
    if(getCookie("categoryid")){
        categoryId = getCookie("categoryid");
    }else{//    591d470af6b02be25ce40001
        categoryId = "591d470af6b02be25ce40001";
    }
    var dataSuccess = function (data) {
        new SmartTV({
            "data":data,
            "lang":data.datas.lang,
            "keyCode":keyCode
        })
    };
    if(getQueryString("productId")){
        productId = getQueryString("productId");
        addClass(getID("smartTv"),"smartTvA");
        addClass(getID("smartTv_f"),"smartTv_fA");
        getID("title").innerHTML = "Smart Tv"
    }else{
        addClass(getID("smartTv"),"smartTv");
        addClass(getID("smartTv_f"),"smartTv_f");
        getPhilips();
    }

    var netConnectNum  = 0;
    function netTimeout(state) {
        if(netConnectNum >= 2) return;
        setTimeout(function () {
            if(state == 0){
                getPhilips();
                netConnectNum++
            }
        },3000);
    }
    //getID("error").innerHTML = "usragent = "+navigator.userAgent;
    if(navigator.userAgent.indexOf("Philips") >= 0 ){
        addClass(getID("smartTv"),"smartTv");
        addClass(getID("smartTv_f"),"smartTv_f");
        addClass(getID("exitBtn"),"exitBtn");
        addClass(getID("exitBtn_f"),"exitBtn_f");
    }else{
        addClass(getID("smartTv"),"smartTvA");
        addClass(getID("smartTv_f"),"smartTv_fA");
        addClass(getID("exitBtn"),"exitBtnA");
        addClass(getID("exitBtn_f"),"exitBtn_fA");
    }
    //var environment = "https://acc-smarttv.zeasn.tv/BluePortServlets/";
    //var environment = "https://smarttv.zeasn.tv/BluePortServlets/";

    //https://dev-smarttv.zeasn.tv/BluePortServlets/linux/app/recommendApp?
    // productId=106
    // &categoryId=87946a9ec5eb11e7936b06bc92f2b7c5
    // &iconId=1
    // &screenShotResolution=
    // &areaCode=LT&langCode=en
    function getPhilips() {
        AjaxRequest({
//        "url" : "json/tsconfig.json",
//        "type":"GET",
            "url":""+environment+"linux/app/recommendApp?",
            "type":"post",
            "data":{
                "productId":67,
                "categoryId":categoryId,//45d0134b7e6211e79b6506bc92f2b7c5
                "iconId":"6",
                "screenShotResolution":"",
                "areaCode":country,
                "langCode":lang
            },
            "method":{
                "success":dataSuccess
            }
        });
    }
</script>
</html>
